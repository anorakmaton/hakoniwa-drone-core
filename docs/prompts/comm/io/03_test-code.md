## Test Code Prompt

1. タスクの説明：
AIを利用して、テスト仕様から効率的にテストコードを生成したいと考えています。  
対象API: send API  
ヘッダ：comm.hppおよび関連するヘッダファイルを渡します。  
テスト仕様：README.md形式で渡します。

以下のテンプレートに従って、テストコードを生成してください。

2. テンプレートの書式：../../test-code-template.cpp を参照してください。

3. テスト条件：

- データ送信するための初期化処理を事前に行なってください。
- データ送信前にサーバー側を事前に起動してください。
- server_open するとブロックされますので、別スレッドで起動してください。
- マルチスレッドでのテストであるため、スレッドセーフな実装を行なってください。
- テスト終了後は、スレッドの待ち合わせおよび、リソースの解放処理を行なってください。
- Google Testを利用してください。
- テストコードは `test/api/comm/send` のようにコンポーネント毎のサブディレクトリに配置してください。
- `test/CMakeLists.txt` から再帰的に読み込まれるため、各ディレクトリに `CMakeLists.txt` を用意してください。
- テストのビルドと実行は `tools/build_and_test.sh` を実行することで行えます。必要なライブラリのダウンロードもこのスクリプトが行います。
- テスト結果は `ctest` の出力として表示されます。失敗した場合は `Tests FAILED` の行を確認してください。
- 各テスト関数の直前には `// SPEC: docs/test/comm/io/test_comm_io_send.md#TEST番号` の形式でテスト仕様書へのトレーサビリティコメントを残してください。
