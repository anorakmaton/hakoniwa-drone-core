# API仕様書作成の共通プロンプト

## 概要

この共通プロンプトは、API仕様書やコード例を作成する際の正確性を保証し、ミスを防ぐための指針をまとめたものです。このプロンプトを適用することで、型定義や定数名の誤りを防ぎ、仕様書やコード例の品質を向上させます。

---

## プロンプト内容

### 1. 型定義を明確に参照する

- API仕様書やコード例を作成する際に、該当する型定義（enum, struct, typedef など）を正確に参照してください。
- 使用する型名や定数名（例: `COMM_IO_TYPE_TCP`）は、指定されたヘッダファイルや設計情報に基づいて確認してください。
- 型や定数名の候補が複数ある場合、必要に応じて全てをリストアップし、適切な選択を行うようにしてください。

**例:**
```
CommIoType の定義を確認し、コード例で正しい定数（例: `COMM_IO_TYPE_TCP`, `COMM_IO_TYPE_UDP`）を使用すること。
```

---

### 2. 参照元の明確化

- 型名や定数名を確認するための参照元（例: ヘッダファイル `comm.hpp`, 設計情報 `api_comm.md`）を必ず確認してください。
- 設計情報に明確な記述がない場合は、該当する関連ヘッダファイルを確認するようにしてください。

**例:**
```
以下のファイルを参照して正確な情報を取得してください：
- `comm.hpp`
- `api_comm.md`
```

---

### 3. 実装例とヘッダファイルの照合

- コード例を作成した後、該当するヘッダファイル（例: `comm.hpp`）や設計情報と照合して正確性を確認してください。
- 型定義や定数名がヘッダファイルと一致しているかを重点的にチェックしてください。

**例:**
```
- コード例の中で使用されている型名や定数名（例: `COMM_IO_TYPE_TCP`）が `comm.hpp` 内の定義と一致しているかを確認すること。
```

---

### 4. エラー防止の注意書き

- enum や定数の誤記を防ぐために、特に以下のポイントに注意してください：
  - 使用する enum の定数名を確認する。
  - 型名と関数シグネチャが正しいかを再確認する。
- コード例や仕様書内での誤記を防ぐため、完成後にチェックリストを活用してください。

**例:**
```
- CommIoType の定義を誤って `CommIoType::TCP` のように記載しないこと。
- 正しい定数は `COMM_IO_TYPE_TCP` の形式であることを確認する。
```

---

### 5. エラー検出と改善

- コード例や仕様書に誤りがあった場合、修正内容と正しい定義を明確に示してください。
- 修正時には、ヘッダファイルや設計情報と改めて照合するプロセスを必ず実行してください。

**例:**
```
誤り例：
`auto client = ICommClient::create(CommIoType::TCP);`

修正例：
`auto client = ICommClient::create(COMM_IO_TYPE_TCP);`

修正理由：`CommIoType` の定数名は `COMM_IO_TYPE_TCP` の形式である必要があるため。
```

---

### 6. レビューの指針

- 他のメンバーや自分でレビューする際には、以下の項目を重点的に確認してください：
  - 型名、定数名、関数シグネチャが正確か。
  - ヘッダファイルや設計情報と一致しているか。
  - 仕様書内の説明や注意事項が適切に記載されているか。

---

## 活用方法

1. API仕様書作成時に、この共通プロンプトを参照してください。
2. 作成後にプロンプトの指針に沿って内容を確認してください。
3. 必要に応じて、このプロンプトを更新・拡張してください。


